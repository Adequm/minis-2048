(function(e){function t(t){for(var i,r,a=t[0],c=t[1],u=t[2],d=0,h=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&h.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(h.length)h.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(i=!1)}i&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},o={app:0},s=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/minis-2048/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"490e":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("c4d1");var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",class:{fullscreen:e.isFullscreen},style:{height:e.innerHeight+"px",maxWidth:e.isDesktop?e.containerWidth+"px":"100vw",maxHeight:e.isDesktop?e.containerHeight+"px":"100vh"}},[e.isPageLoad?n("div",{staticClass:"minis__wrapper"},[e.isDesktop?n("SettingsDesktop",{attrs:{themeIcon:e.themeMain.icon,appHeight:e.appHeight,appWidth:e.appWidth,translate:e.translate,translateDef:e.translateDef},on:{switchTheme:e.switchTheme,switchLang:e.switchLang,switchFullscreen:e.switchFullscreen},model:{value:e.isClosedSettings,callback:function(t){e.isClosedSettings=t},expression:"isClosedSettings"}}):e._e(),n("LayoutContent",{ref:"layoutContent",style:{filter:e.openedModalName?"blur(2px)":"none"},attrs:{appWidth:e.appWidth,appHeight:e.appHeight,bodyHeight:e.innerHeight,isDesktop:e.isDesktop,isWidthMore768:e.isWidthMore768},on:{switchSettings:function(t){e.isClosedSettings=!e.isClosedSettings},openModal:function(t){e.openedModalName=t}}}),n("AppModal",{attrs:{isRoundedBorder:e.isWidthMore768&&!e.isFullscreen},model:{value:e.openedModalName,callback:function(t){e.openedModalName=t},expression:"openedModalName"}},["settings"==e.openedModalName?n("SettingsMobile",{attrs:{themeIcon:e.themeMain.icon,isWidthMore768:e.isWidthMore768},on:{switchTheme:e.switchTheme,switchLang:e.switchLang,switchFullscreen:e.switchFullscreen}}):e._e(),"endgame"==e.openedModalName?n("div",{staticClass:"endgame-modal"},[e.currentScore>=e.maxScore?n("h4",{domProps:{textContent:e._s(e.translate("modal.newRecord"))}}):e._e(),n("h2",{domProps:{textContent:e._s(e.currentScore)}})]):e._e()],1),e.isDesktop?n("div",{staticClass:"resize_button",on:{mousedown:function(t){return t.preventDefault(),e.startResize.apply(null,arguments)},dblclick:function(t){return t.preventDefault(),e.autoResize.apply(null,arguments)}}}):e._e(),e.isDesktop?n("a",{staticClass:"minis",attrs:{href:"https://adequm.github.io/minis",target:"_blank"},domProps:{textContent:e._s("Minis")}}):e._e()],1):n("AppLoader",{attrs:{size:100,rotate:""}})],1)},s=[],r=n("5530"),a=n("2ef0"),c=n.n(a),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"minis__content",style:{minHeight:e.appHeight+"px",gridTemplateRows:e.gridTemplateRows}},[n("AppNavigation",{staticStyle:{height:"100%","padding-bottom":"0"},attrs:{isDesktop:e.isDesktop,score:e.currentScore,maxScore:e.maxScore,gameType:e.gameType},on:{openModal:function(t){return e.$emit("openModal",t)},switchGameType:e.switchGameType}}),n("Layout2048",{ref:"game2048",attrs:{rows:e.rowsMount,cols:e.colsMount,width:e.gridWidth+"px",height:e.gridHeight+"px",gameType:e.gameType},on:{updateScore:e.setCurrentScore,gameover:function(t){e.$emit("openModal","endgame")&&e.setMaxScore(e.currentScore)}}})],1)},l=[],d=(n("a9e3"),n("7db0"),n("d3b7"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{key:e.hash,staticClass:"grid",style:{height:e.height,width:e.width}},e._l(e.rows,(function(t){return n("div",{key:t,staticClass:"row"},e._l(e.cols,(function(i){return n("div",{key:i,staticClass:"cell",class:[e.gameType],attrs:{"area-num":e.grid[t-1][i-1]}})})),0)})),0)}),h=[],p=n("1da1"),m=(n("96cf"),n("ddb0"),n("e9c4"),n("fb6a"),{name:"Layout2048",props:{rows:Number,cols:Number,width:String,height:String,gameType:String},data:function(){return{lodash:c.a,grid:{},emptyGrid:{},hash:null,usedCells:{}}},watch:{hash:function(){var e=this;i["a"].set(this,"emptyGrid",{}),c.a.times(this.rows,(function(t){c.a.times(e.cols,(function(n){if(!e.grid[t][n]){var o=c.a.get(e.emptyGrid,t,{});i["a"].set(o,n,null),i["a"].set(e.emptyGrid,t,o)}}))}))},score:function(e){e&&this.$emit("updateScore",e)}},computed:{score:function(){return c.a.chain(this.grid).flatMapDeep((function(e){return c.a.values(e)})).sum().value()}},methods:{startGame:function(){var e=this;i["a"].set(this,"grid",{}),c.a.times(this.rows,(function(t){c.a.times(e.cols,(function(n){var o=c.a.get(e.grid,t,{});i["a"].set(o,n,null),i["a"].set(e.grid,t,o)}))})),this.hash=JSON.stringify(this.grid)},endGame:function(){this.$emit("gameover"),this.startGame()},getRandomCell:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.$nextTick((function(){c.a.times(t,(function(t){if(!c.a.size(e.emptyGrid))return e.endGame();var n=c.a.sample(c.a.keys(e.emptyGrid)),o=e.emptyGrid[n],s=c.a.sample(c.a.keys(o));i["a"].set(e.grid[n],s,c.a.sample([2,4])),e.hash=JSON.stringify(e.grid),e.checkEndGame()}))}))},move:function(e){this.shiftDefined({left:{isHorizontal:!0},right:{isHorizontal:!0,isReverseX:!0},up:{isVertical:!0},down:{isVertical:!0,isReverseY:!0}}[e])},shiftDefined:function(e){var t=this,n=e.isReverseX,o=e.isReverseY,s=e.isVertical,r=e.isHorizontal,a=c.a.times(c.a.size(this.grid)),u=c.a.times(c.a.size(this.grid[0]));n&&(u=u.reverse()),o&&(a=a.reverse()),c.a.each(a,(function(e,l){if(l||!s)for(var d=function(l){var d,h=u[l],p=t.grid[e][h];if(!l&&r)return"continue";if(!p)return"continue";var m=void 0,f=void 0;if(s){m=h;var g=c.a.cloneDeep(a).reverse().slice(o?e:-e-1);f=c.a.find(g,(function(e,n){var i,o,s,r,a=t.grid[e][h],c=null===(i=t.grid)||void 0===i||null===(o=i[g[n+1]])||void 0===o?void 0:o[h];return!(!c&&n!==g.length-1)&&(!(null===(s=t.usedCells)||void 0===s||null===(r=s[g[n+1]])||void 0===r||!r[h])||(!a&&n===g.length-1||(c!==p||(!(a!=p||!n)||void 0))))}))}if(r){f=e;var v=c.a.cloneDeep(u).reverse().slice(n?h:-h-1);m=c.a.find(v,(function(n,i){var o,s,r=t.grid[e][n],a=t.grid[e][v[i+1]];return!(!a&&i!==v.length-1)&&(!(null===(o=t.usedCells)||void 0===o||null===(s=o[e])||void 0===s||!s[v[i+1]])||(!r&&i===v.length-1||(a!==p||(!(r!=p||!i)||void 0))))}))}var b=t.grid[f][m];i["a"].set(t.grid[e],h,null);var y=b!=p||f===e&&m===h?p:2*b;if(i["a"].set(null===(d=t.grid)||void 0===d?void 0:d[f],m,y),m==h||!b)return"continue";i["a"].set(t.usedCells,f,t.usedCells[f]||{}),i["a"].set(t.usedCells[f],m,!0)},h=0;h<u.length;h++)d(h)}));var l=c.a.clone(this.hash);if(this.hash=JSON.stringify(this.grid),i["a"].set(this,"usedCells",{}),l===this.hash)return this.checkEndGame();this.getRandomCell()},checkEndGame:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!c.a.size(e.emptyGrid)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,new Promise((function(t){c.a.each(e.grid,(function(n,i){c.a.each(n,(function(o,s){var r,a;o==n[s+1]&&t(!1),o==(null===(r=e.grid)||void 0===r||null===(a=r[+i+1])||void 0===a?void 0:a[+s])&&t(!1),i==c.a.size(e.grid)-1&&s==c.a.size(n)-1&&t(!0)}))}))}));case 4:n=t.sent,n&&e.endGame();case 6:case"end":return t.stop()}}),t)})))()}},beforeMount:function(){this.startGame(),this.getRandomCell()}}),f=m,g=(n("aca3"),n("2877")),v=Object(g["a"])(f,d,h,!1,null,"2ec12340",null),b=v.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navigation"},[n("button",{staticClass:"navigation__item nofocus",staticStyle:{cursor:"default"},style:{color:e.headerScoreColor},domProps:{textContent:e._s(e.headerScore)}}),e.isDesktop?e._e():n("button",{staticClass:"navigation__item navigation__item-settings nofocus nohover",on:{click:function(t){return e.$emit("openModal","settings")}}},[n("Icon",{attrs:{type:"settings"}})],1),n("button",{staticClass:"navigation__item",staticStyle:{color:"var(--special-color)"},on:{click:function(t){return e.$emit("switchGameType")}}},[n("Icon",{attrs:{type:e.gameType}})],1)])},w=[],S=(n("99af"),n("b54a")),k={name:"AppNavigation",components:{Icon:S["c"]},props:{isDesktop:Boolean,gameType:String,score:Number,maxScore:Number},data:function(){return{lodash:c.a}},computed:{headerScoreColor:function(){var e=c.a.isNumber(this.headerScore)?"special":"text";return"var(--".concat(e,"-color)")},headerScore:function(){return this.score>=this.maxScore?this.score:"".concat(this.score,"/").concat(this.maxScore)}}},M=k,x=(n("5d83"),Object(g["a"])(M,y,w,!1,null,"4a5f8531",null)),C=x.exports,O=n("2f62"),_={name:"LayoutContent",components:{Layout2048:b,AppNavigation:C},props:{appWidth:Number,appHeight:Number,bodyHeight:Number,isDesktop:Boolean,isWidthMore768:Boolean},data:function(){return{lodash:c.a,touchX:null,touchY:null}},computed:Object(r["a"])(Object(r["a"])({},Object(O["c"])(["maxScore","currentScore","gameType","rowsMount","colsMount"])),{},{gridTemplateRows:function(){var e=Math.min(.15*this.appHeight,65);this.appHeight;return"".concat(e,"px 1fr 10px")},gridHeight:function(){return this.appHeight-75-40},gridWidth:function(){return this.appWidth-40}}),methods:Object(r["a"])(Object(r["a"])({},Object(O["b"])(["setMaxScore","switchGameType","setCurrentScore"])),{},{keydown:function(e){var t=e.key;switch(t){case"Escape":this.$emit("switchSettings");break;case"ArrowLeft":this.$refs.game2048.move("left");break;case"ArrowRight":this.$refs.game2048.move("right");break;case"ArrowUp":this.$refs.game2048.move("up");break;case"ArrowDown":this.$refs.game2048.move("down");break}},touchReset:function(){this.touchX=null,this.touchY=null},touchStart:function(e){var t,n,i,o,s=e.changedTouches,r=e.clientX,a=e.clientY,u=e.path,l=c.a.find(u,(function(e){return c.a.invoke(e,"classList.contains","grid")}));if(c.a.size(s)>1||!l)return this.touchReset();e.preventDefault(),this.touchX=null!==(t=null===s||void 0===s||null===(n=s[0])||void 0===n?void 0:n.clientX)&&void 0!==t?t:r,this.touchY=null!==(i=null===s||void 0===s||null===(o=s[0])||void 0===o?void 0:o.clientY)&&void 0!==i?i:a},touchEnd:function(e){var t,n,i,o,s=e.changedTouches,r=e.clientX,a=e.clientY;if(c.a.size(s)>1)return this.touchReset();if(this.touchX&&this.touchY){var u=this.touchX-(null!==(t=null===s||void 0===s||null===(n=s[0])||void 0===n?void 0:n.clientX)&&void 0!==t?t:r),l=this.touchY-(null!==(i=null===s||void 0===s||null===(o=s[0])||void 0===o?void 0:o.clientY)&&void 0!==i?i:a),d=Math.abs(u)>Math.abs(l);if((u||l)&&!(Math.max(Math.abs(u),Math.abs(l))<=10)){var h=d?u>0?"left":"right":l>0?"up":"down";c.a.invoke(this.$refs.game2048,"move",h),this.touchReset()}}}}),mounted:function(){document.addEventListener("keydown",this.keydown),document.addEventListener("touchstart",this.touchStart),document.addEventListener("touchend",this.touchEnd),document.addEventListener("mousedown",this.touchStart),document.addEventListener("mouseup",this.touchEnd)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown),document.removeEventListener("touchstart",this.touchStart),document.removeEventListener("touchend",this.touchEnd),document.removeEventListener("mousedown",this.touchStart),document.removeEventListener("mouseup",this.touchEnd)}},j=_,T=(n("e133"),Object(g["a"])(j,u,l,!1,null,null,null)),L=T.exports,D=n("1c09"),N={components:{LayoutContent:L,AppModal:S["b"],SettingsDesktop:S["d"],SettingsMobile:S["e"],AppLoader:S["a"]},mixins:[D["b"],D["d"],D["a"],D["e"]],data:function(){return{lodash:c.a,isClosedSettings:!0,openedModalName:null}},watch:{isDesktop:function(e){e&&"settings"==this.openedModalName&&(this.openedModalName=null,this.isClosedSettings=!1)},openedModalName:function(e,t){e||"endgame"!==t||c.a.invoke(this.$refs.layoutContent,"$refs.game2048.getRandomCell")}},computed:Object(r["a"])({},Object(O["c"])(["currentScore","maxScore"])),methods:Object(r["a"])({},Object(O["b"])(["switchFullscreen"])),beforeMount:function(){var e=this;document.body.addEventListener("click",(function(t){document.body===t.path[0]&&e.isDesktop&&(e.isClosedSettings||(e.isClosedSettings=!0))}))}},E=N,R=(n("5c0b"),Object(g["a"])(E,o,s,!1,null,null,null)),G=R.exports,H=n("9483");Object(H["a"])("".concat("/minis-2048/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var $=n("2909"),W=n("ade3"),z=(n("a15b"),n("ac1f"),n("1276"),n("0e44")),A=n("0759"),P=n.n(A),F=location.pathname.split("/")[1].split("-").slice(1).join("-"),X="".concat(F,"-isFullscreen"),Y={};i["a"].use(O["a"]),Y.state=function(){var e;return e={},Object(W["a"])(e,X,!1),Object(W["a"])(e,"projectKey",F),Object(W["a"])(e,"maxScore",0),Object(W["a"])(e,"currentScore",0),Object(W["a"])(e,"gameTypesList",["raindrops","square"]),Object(W["a"])(e,"gameType","raindrops"),Object(W["a"])(e,"rowsMount",4),Object(W["a"])(e,"colsMount",4),e},Y.getters={isFullscreen:function(e){return e[X]}},Y.mutations={switchFullscreen:function(e){return i["a"].set(e,X,!e[X])},setCurrentScore:function(e,t){return i["a"].set(e,"currentScore",t)},setMaxScore:function(e,t){e.maxScore>=t||i["a"].set(e,"maxScore",t)},switchGameType:function(e){var t=c.a.indexOf(e.gameTypesList,e.gameType),n=(t+1)%e.gameTypesList.length;i["a"].set(e,"gameType",e.gameTypesList[n])},setColsMount:function(e,t){return i["a"].set(e,"colsMount",t)},setRowsMount:function(e,t){return i["a"].set(e,"rowsMount",t)}};var B=[X,"maxScore","gameType","rowsMount","colsMount"];Y.modules={minis:D["f"]},Y.plugins=[P()({predicate:function(){return[].concat(Object($["a"])(D["c"]),B)}}),Object(z["a"])({paths:D["c"],key:"minis"}),Object(z["a"])({paths:B,key:"minis-".concat(F)})];var I=new O["a"].Store(Y);i["a"].config.productionTip=!1,new i["a"]({store:I,render:function(e){return e(G)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"5d83":function(e,t,n){"use strict";n("490e")},"5fa0":function(e,t,n){},"9c0c":function(e,t,n){},aca3:function(e,t,n){"use strict";n("5fa0")},e133:function(e,t,n){"use strict";n("eed6")},eed6:function(e,t,n){}});
//# sourceMappingURL=app.00a74f1c.js.map